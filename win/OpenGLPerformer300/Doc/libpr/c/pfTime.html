<HTML>
<HEAD>
<TITLE>pfTime</TITLE>
</HEAD>
<BODY>
<H1>pfTime</H1>
<HR>
<PRE>
<!-- Manpage converted by man2html 3.0.1 -->
pfTime(3pf)                                           pfTime(3pf)




</PRE>
<H2>NAME</H2><PRE>
       <B>pfInitClock,</B>   <B>pfGetTime,</B>   <B>pfClockMode,</B>   <B>pfGetClockMode,</B>
       <B>pfClockName,</B> <B>pfGetClockName,</B> <B>pfWrapClock</B> - Initialize  and
       query high resolution clock


</PRE>
<H2>FUNCTION SPECIFICATION</H2><PRE>
       #include &lt;Performer/pr.h&gt;

       pid_t          <B>pfInitClock</B>(double time);

       double         <B>pfGetTime</B>(void);

       void           <B>pfClockMode</B>(int mode);

       int            <B>pfGetClockMode</B>(void);

       void           <B>pfClockName</B>(char *name);

       const char *   <B>pfGetClockName</B>(char *name);

       void           <B>pfWrapClock</B>(void);


</PRE>
<H2>DESCRIPTION</H2><PRE>
       Most  SGI  platforms have high resolution hardware timers.
       The routines described in this man page provide  a  simple
       interface to these timers.

       On  the  first call to <B>pfInitClock</B>, OpenGL Performer finds
       the highest resolution clock available and initializes it,
       setting  the  initial  time  to  <I>time</I> seconds.  Subsequent
       calls simply reset the initial time.

       <B>pfGetTime</B> returns a high resolution clock time in  seconds
       that  is  relative to the initial time set by <B>pfInitClock</B>.
       It determines the highest resolution clock  available  and
       uses that clock in all subsequent calls.  On Indy, Indigo,
       Indigo2, 4D/35, Power Series systems with IO3 boards,  and
       Onyx,  the  resolution of the clock is submicrosecond.  If
       the hardware does not support a high  resolution  counter,
       the  time  of  day  clock is used which typically has 10ms
       resolution (see below).

       By default, processes  forked  after  the  first  call  to
       <B>pfInitClock</B>  share  the same clock.  All such related pro-
       cesses receive the same time from <B>pfGetTime</B>  and  see  the
       effects of any subsequent calls to <B>pfInitClock</B>.

       Unrelated  processes can similarly share a single clock by
       invoking <B>pfClockName</B> before the first call to <B>pfInitClock</B>.
       <B>pfClockName</B>  allows  a character string name to be associ-
       ated with a clock before it is  initialized.   <B>pfClockName</B>
       has  no  effect  after  the  clock  has  been initialized.
       <B>pfGetClockName</B> returns the name of the clock.

       OpenGL Performer periodically checks to see if the  under-
       the process that called <B>pfInitClock</B>.  In  this  case,  the
       SIGALRM signals generated by the interval timer are gener-
       ated and handled in that process.  Wrap  checking  can  be
       disabled  altogether  with  a  <I>mode</I> of <B>PFCLOCK_NOWRAP</B>.  In
       this case, the application should invoke <B>pfWrapClock</B>  with
       sufficient  frequency  to  avoid  missing  a  cycle of the
       counter (typically the hardware counters wrap every 60-120
       secs,  but  the  R3000  Indigo's clock wraps every 500ms).
       <B>pfGetClockMode</B> returns the clock mode.

       When wrapping is done in a separate process, only one pro-
       cess  is  spawned,  regardless  of the number of processes
       using the same clock.  If the calling process  has  super-
       user  privileges,  both the spawned process and the kernel
       clock functions are forced to run on CPU  0.   <B>pfInitClock</B>
       returns the process ID of the process handling clock wrap-
       ping and 0 otherwise.  A value of -1 indicates failure.



</PRE>
<H2>NOTES</H2><PRE>
       If none of the hardware clocks are available, the time  of
       day  clock  is  used,  but with only 10ms resolution it is
       insufficient for many applications such as frame rate con-
       trol.   In  this case, it may be useful to enable the fast
       clock (see <B>ftimer(1)</B>).

       The pfDataPool file for  clock  data  is  created  in  the
       directory  <I>/usr/tmp</I>  or  in the directory indicated by the
       <B>PFTMPDIR</B> environment variable, if it is specified.

       Processes specifying a clock of the same name, share  that
       clock  through  a  pfDataPool.  With an unnamed clock, the
       pfDataPool is deleted on exit,  but  when  using  a  named
       clock, the application must explicitly call <B>pfReleaseDPool</B>
       with the clock name to remove the pfDataPool.


</PRE>
<H2>SEE ALSO</H2><PRE>
       fork, ftimer, setitimer, lboot



                                                      pfTime(3pf)
</PRE>
<HR>
<ADDRESS>
Man(1) output converted with
<a href="http://www.oac.uci.edu/indiv/ehood/man2html.html">man2html</a>
</ADDRESS>
</BODY>
</HTML>
